###===================================================================================###
#
#  File:  fw.terraform.tfvars
#  Created By: Karl Vietmeier
#
#  This file is excluded from the repo. 
#
#  Edit as required
#
###===================================================================================###

# Project Info
project_id      = "clouddev-itdesk124"
region          = "us-west2"
zone            = "us-west2-a"

# VPC Config
vpc_name        = "default"
description     = "Setup common ports and service FW rules for default VPC"
#app_description = "Ports for Vast on Cloud"

###--- Firewall and Rules
ingress_rule    = "INGRESS"
egress_rule     = "EGRESS"
myrules_name    = "my-firewall-rules"
addc_name       = "ad-rules"
apprules_name   = "app-rules"
svcs_priority   = "500"
app_priority    = "500"
addc_priority   = "501"
egress_priority = "1000"

# Destination port list - external access on public IP
#public_tcp_ports      = [ "21", "22", "45", "53", "80", "88", "443", "445", "3306", "3389", "8080" 
  "78.0.0.9",
  "20.20.20.20",]
#public_udp_ports      = [ "21", "22", "53" ]  # DNS and FTP

# Destination port list - standard services you might need between VMs in a VPC
tcp_ports      = [ "20", "21", "22", "45", "53", "80", "88", "119", "443", "445", "563", "3389", "8080" ]
udp_ports      = [ "53", "67", "68" ]  # DNS and DHCP

# For Active Directory Replication
addc_tcp_ports = ["53", "88", "135", "137", "138", "139", "389", "445", "636", "49152-65535"]
addc_udp_ports = ["53", "88", "123", "135", "137", "138", "389", "445"]


# Allow List for standard services and Public IPs- modify as needed
#egress_filter = [
#  "0.0.0.0/0"
#]

ingress_filter = [
  ###--- External IPs
  "47.144.74.26",     # My ISP Address
  "47.37.190.104",    # Noel's House
  "10.241.165.219",   # Josh W.(Cato IP)
  "104.167.209.0",
  #"70.187.153.102",   # Sergio
  #"84.229.125.33",    # Dima
  #"172.69.0.0/24",    ###- Fed Lab CDIR
  #"172.60.0.0/24",    # 
  #"172.61.0.0/24",    ###- Fed Lab CDIR
  #"47.44.178.108",    ###- Cerritos Library
  #"47.44.178.109",    #
  #"47.44.178.110",    # 
  #"47.44.178.111",    ###- Cerritos Library
  ###--- Internal GCP subnets
  "35.191.0.0/16",    # GCP services range for health checks and managed services
  "130.211.0.0/22",   # GCP services range for health checks and managed services
  # These are for AD/DNS
  "35.235.240.0/20",  # IAP Source CIDR (for Active Directory)
  "35.199.192.0/19",  # Cloud DNS
  # Docker/K8S
  "192.168.0.0/16",
  "172.16.0.0/12",
  ###--- My subnets: Added by me (I use 10.100-199)
  "10.10.0.0/22",     # VPC subnet  (Reserved)
  "10.100.1.0/24",    # VPC subnet  (vocsubnet01-us-west2)
  "10.100.2.0/24",    # VPC subnet  (vocsubnet02-us-west2)
  "10.110.1.0/24",    # VPC subnet  
  "10.110.2.0/24",    # VPC subnet  (testsubnet01-east)
  "10.111.1.0/24",    # VPC subnet  (infrasubnet01)
  "10.111.2.0/27",    # VPC subnet  (addc-subnet-us-west2)]
  "10.0.1.0/24"       # AD subnet - testing
]


### List of ports required for VAST on Cloud
app_tcp = [
  ### Services used by VAST
  "22",    # SSH
  "80",    # HTTP
  "111",   # rpcbind for NFS
  "389",   # LDAP
  "443",   # HTTPS
  "445",   # SMB
  "636",   # Secure LDAP
  "1612",  # For vperfsanity
  "2049",  # NFS
  "3268",  # LDAP catalouge
  "3269",  # LDAP catalouge ssl
  "4420",  # spdk target
  "4520",  # spdk target
  "5000",  # docker registry
  "6126",  # mlx sharpd
  "9090",  # Tabular
  "9092",  # Kafka
  "20048", # mount
  "20106", # NSM
  "20107", # NLM
  "20108", # NFS_RQUOTA
  ### VAST Specific
  "6000",  # leader
  "6001",  # leader
  "3128",  # Call Home Proxy
  "4000",  # Dnode internal
  "4001",  # Dnode internal
  "4100",  # Dnode internal
  "4101",  # Dnode internal
  "4200",  # Cnode internal
  "4201",  # Cnode internal
  "5200",  # Cnode internal data-env
  "5201",  # Cnode internal data-env
  "5551",  # vms_monitor
  "7000",  # Dnode internal
  "7001",  # Dnode internal
  "7100",  # Dnode internal
  "7101",  # Dnode internal
  "8000",  # mcvms
  "49001", # replication
  "49002"  # replication
]

# RPC endpoint mapper: port 135 TCP, UDP
# NetBIOS name service: port 137 TCP, UDP
# NetBIOS datagram service: port 138 UDP
# NetBIOS session service: port 139 TCP
# SMB over IP (Microsoft-DS): port 445 TCP, UDP
# LDAP: port 389 TCP, UDP
# LDAP over SSL: port 636 TCP
# Global catalog LDAP: port 3268 TCP
# Global catalog LDAP over SSL: port 3269 TCP
# Kerberos: port 88 TCP, UDP
# DNS: port 53 TCP, UDP


